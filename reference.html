<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="CLEO Redux: a new scripting runtime" />
    <meta name="author" content="Seemann" />
    <title>CLEO Redux</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Google fonts-->
    <link
      href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic"
      rel="stylesheet"
      type="text/css"
    />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
  </head>
  <body id="page-top">
    <!-- Navigation-->
    <nav
      class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top py-3"
      id="mainNav"
    >
      <div class="container px-4 px-lg-5">
        <a class="navbar-brand" href="index.html">CLEO Redux</a>
        <button
          class="navbar-toggler navbar-toggler-right"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarResponsive"
          aria-controls="navbarResponsive"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ms-auto my-2 my-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="index.html#features">Features</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="reference.html">Reference</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html#download">Download</a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="https://github.com/cleolibrary/CLEO-Redux/discussions"
                >Discuss</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="https://github.com/cleolibrary/CLEO-Redux"
                >GitHub</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Features-->
    <section class="page-section">
      <div class="container px-4 px-lg-5">
        <h2 class="text-center mt-0">JavaScript Reference</h2>
        <hr class="divider" />
        <div class="row gx-4 gx-lg-5">
          <ul class="list-unstyled">
            <li>
              <code>GAME</code> (possible values are <code>re3</code> and
              <code>reVC</code>) - current game id<br /><br />

              <samp>
                <pre>
    if (GAME === "re3") { showTextBox("This is re3"); } 
    if (GAME === "reVC") { showTextBox("This is reVC"); }
              </pre
                >
              </samp>
            </li>

            <li>
              <code>log(...values)</code> - prints <code>{values}</code> to the
              cleo.log

              <samp>
                <pre>
    var x = 1;
    log("value of x is ", x);
              </pre
                >
              </samp>
            </li>

            <li>
              <code>wait(timeInMs)</code> - pauses the script execution for at
              least <code>{timeInMs}</code> milliseconds<br /><br />

              <samp>
                <pre>
    while(true) {
      wait(1000);
      log("1 second passed");
    }
              </pre
                >
              </samp>
            </li>

            <li>
              <code>isKeyPressed(vk_id)</code> - returns true if the key with
              the code <code>{vk_id}</code> is pressed.
              <a
                href="https://docs.microsoft.com/en-us/windows/win32/inputdev/virtual-key-codes"
                target="_blank"
                >Virtual key-codes reference</a
              ><br /><br />

              <samp>
                <pre>
    if (isKeyPressed(0x74)) {
      log("F5 is pressed");
    }
</pre
                >
              </samp>
            </li>

            <li>
              <code>showTextBox(text)</code> - displays {text} in the black
              rectangular box<br /><br />

              <samp>
                <pre>
    showTextBox("Hello, world!")
              </pre
                >
              </samp>
            </li>

            <li>
              <code>op(opcode_id, ...input_args)</code> - executes the script
              command with id <code>{opcode_id}</code>.<br /><br />
              For commands that return a single value, the result is this value.
              <br />
              For commands that return multiple values, the result is an object
              where each key corresponds to a returned value. The key names
              match the output names given in the command definition. See the
              <a href="https://library.sannybuilder.com/#/" target="_blank"
                >Commands reference</a
              ><br />
              For conditional commands the result is the boolean value
              <code>true</code> or <code>false</code><br /><br />

              <samp>
                <pre>
    op(0x00c0, 12, 30); // sets the time of day to 12:30

    var pos = op(0x0054, 0); // returns player 0 coordinates vector ({x, y, z});
    showTextBox("Player pos:", " x = ", pos.x, " y = ", pos.y, " z = ", pos.z);

    if (op(0x0248, 101)) { // checks the condition
      showTextBox("Model with id 101 has been loaded");
    }
              </pre
                >
              </samp>
            </li>
          </ul>

          <div>
            <h4>Example script</h4>
            <samp>
              <pre>

/**
 * this script spawns an Infernus in front of the player
 * when the F5 button is pressed
 */

var VK_F5 = 116;
var MI_INFERNUS = GAME === "re3" ? 101 : 141;

setTimeOfDay(12, 30);

while (true) {
  wait(250);
  if (isKeyPressed(VK_F5)) {
    loadModel(MI_INFERNUS);

    var pos = addVec(getPlayerPos(), { x: 2.0, y: -2.0, z: 0 });
    createCar(MI_INFERNUS, pos);

    showTextBox("Here is your Infernus");

    wait(2000);
  }
}

function isKeyPressed(key) {
  return op(0x0ab0, key);
}

function getPlayerPos() {
  return op(0x00a0, getPlayerActor());
}

function loadModel(mi) {
  op(0x0247, mi);

  while (!op(0x0248, mi)) {
    wait(250);
  }
}

function createCar(mi, pos) {
  op(0x00a5, mi, pos.x, pos.y, pos.z);
}

function addVec(v1, v2) {
  return { x: v1.x + v2.x, y: v1.y + v2.y, z: v1.z + v2.z };
}

function setTimeOfDay(hours, mins) {
  op(0x00c0, hours, mins);
}

function getPlayerActor() {
  return op(0x01f5, 0);
}

              </pre>
            </samp>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer-->
    <footer class="bg-light py-5">
      <div class="container px-4 px-lg-5">
        <p class="small text-center text-muted">
          CLEO Redux. Copyright &copy; 2021
          <a href="https://github.com/x87" target="_blank">Seemann</a>
        </p>
        <p class="small text-center text-muted">
          Template by
          <a href="https://startbootstrap.com/" target="_blank"
            >Start Bootstrap</a
          >
          . Photo by
          <a href="https://www.pexels.com/@ithalu" target="_blank"
            >Ithalu Dominguez</a
          >
        </p>
      </div>
    </footer>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
  </body>
</html>
